<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tarefa 1</title>
</head>
<body>
    <canvas>
    </canvas>
    <script>
        let canvas = document.querySelector("canvas");
        canvas.width = 480;
        canvas.height = 320;
        let ctx = canvas.getContext("2d");
        let t0;
        let dt;
        requestAnimationFrame(tela);

        let p = {
         x: canvas.width/2,
         y: canvas.height/2,
         vx: 0,
         vy: 0,
         ax: 0,
         ay: 0,
         tamanho: 25,
         cor: "white",
         mover: acelerarBloco,
         desenha: desenhaBloco
        };
        let e = {
            x: canvas.width/2 + 100,
            y: canvas.height/2 - 100,
            vx: 0,
            vy: 0,
            ax: 0,
            ay: 0,
            tamanho: 25,
            cor: "blue",
            mover: acelerarBloco,
            desenha: desenhaBloco,
            perseguir: persegueAlvo
        };

        const A = 100;

        function acelerarBloco() {
            this.vx += this.ax*dt;
            this.vy += this.ay*dt;
            this.x += this.vx*dt;
            this.y += this.vy*dt;
        }
        function desenhaBloco() {
            ctx.fillStyle = this.cor;
            ctx.fillRect(this.x, this.y, this.tamanho, this.tamanho);
        }
        function persegueAlvo(alvo) {
            this.ax = 0.2*(alvo.x - this.x) - 0.05*this.vx;
            this.ay = 0.2*(alvo.y - this.y) - 0.05*this.vy;
        }

        function tela(t) {
            t0 = t0 ?? t;
            dt = (t - t0)/1000;

            ctx.fillStyle = "grey";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            //controlador
            e.perseguir;
            //bloco anda
            p.mover;
            e.mover;
            //tamanho += 75*Math.sin(t/200)*dt;

            //desenha blocos
            p.desenha;
            e.desenha;

            requestAnimationFrame(tela);
            t0 = t;
        }
        addEventListener("keydown", moveBloco);
        addEventListener("keyup", paraBloco);

        function moveBloco(event) {
            switch (event.key) {
                case "ArrowDown":
                    p.ay = A;
                    break;
                case "ArrowUp":
                    p.ay = -A;
                    break;
                case "ArrowLeft":
                    p.ax = -A;
                    break;
                case "ArrowRight":
                    p.ax = +A;
                    break;
                default:
                    break;
            }
        }
        function paraBloco(event) {
            switch (event.key) {
                case "ArrowDown":
                case "ArrowUp":
                    p.ay = 0;
                    break;
                case "ArrowLeft":
                case "ArrowRight":
                    p.ax = 0;
                    break;
                default:
                    break;
            }
        }
    </script>
</body>
</html>